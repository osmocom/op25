#! /bin/bash

me=$0
f=$1

echo "$me processing $f"

sed -i -f - $f << EOF
/^# Make sure our local CMake Modules path comes first/i\
########################################################################\n\
# Find boost\n\
########################################################################\n\
if(UNIX AND EXISTS "/usr/lib64")\n\
    list(APPEND BOOST_LIBRARYDIR "/usr/lib64") #fedora 64-bit fix\n\
endif(UNIX AND EXISTS "/usr/lib64")\n\
set(Boost_ADDITIONAL_VERSIONS\n\
    "1.35.0" "1.35" "1.36.0" "1.36" "1.37.0" "1.37" "1.38.0" "1.38" "1.39.0" "1.39"\n\
    "1.40.0" "1.40" "1.41.0" "1.41" "1.42.0" "1.42" "1.43.0" "1.43" "1.44.0" "1.44"\n\
    "1.45.0" "1.45" "1.46.0" "1.46" "1.47.0" "1.47" "1.48.0" "1.48" "1.49.0" "1.49"\n\
    "1.50.0" "1.50" "1.51.0" "1.51" "1.52.0" "1.52" "1.53.0" "1.53" "1.54.0" "1.54"\n\
    "1.55.0" "1.55" "1.56.0" "1.56" "1.57.0" "1.57" "1.58.0" "1.58" "1.59.0" "1.59"\n\
    "1.60.0" "1.60" "1.61.0" "1.61" "1.62.0" "1.62" "1.63.0" "1.63" "1.64.0" "1.64"\n\
    "1.65.0" "1.65" "1.66.0" "1.66" "1.67.0" "1.67" "1.68.0" "1.68" "1.69.0" "1.69"\n\
    "1.74.0" "1.74"\n\
)\n\
find_package(Boost "1.35" COMPONENTS filesystem system)\n\
\n\
if(NOT Boost_FOUND)\n\
    message(FATAL_ERROR "Boost required to compile op25")\n\
endif()\n\

EOF
